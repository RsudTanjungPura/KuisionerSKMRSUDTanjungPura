<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kuesioner SKM RSUD Tanjung Pura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: linear-gradient(135deg, #69b578 0%, #2d6a4f 100%);
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .header {
      text-align: center;
      padding: 36px 16px 10px 16px;
      color: #fff;
      position: relative;
      z-index: 2;
    }
    .header img {
      max-width: 100px;
      margin-bottom: 10px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .header h2 {
      margin: 0;
      font-size: 1.6rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      background: none;
      z-index: 2;
      position: relative;
    }
    .card {
      background: #fff;
      max-width: 520px;
      margin: 24px auto 32px auto;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(44, 62, 80, 0.12);
      padding: 32px 24px 24px 24px;
      position: relative;
      z-index: 1;
    }
    fieldset {
      border: none;
      margin-bottom: 18px;
      padding: 0;
    }
    legend {
      font-size: 1.15rem;
      font-weight: bold;
      color: #2d6a4f;
      margin-bottom: 8px;
      padding-top: 8px;
    }
    label {
      font-weight: 500;
      color: #222;
      display: block;
      margin: 12px 0 4px 0;
    }
    select, input[type="number"], input[type="text"] {
      width: 100%;
      padding: 9px 10px;
      border: 1px solid #b2b2b2;
      border-radius: 6px;
      font-size: 1rem;
      margin-bottom: 10px;
      box-sizing: border-box;
      background: #f5f5f5;
    }
    .options label {
      font-weight: normal;
      display: block;
      margin-bottom: 7px;
      color: #444;
      padding-left: 2px;
    }
    .options input[type="radio"] {
      margin-right: 6px;
    }
    button[type="submit"] {
      width: 100%;
      padding: 13px;
      background: #2d6a4f;
      color: #fff;
      font-size: 1.08rem;
      border: none;
      border-radius: 7px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
      box-shadow: 0 2px 8px rgba(44, 62, 80, 0.16);
      transition: background 0.2s;
    }
    button[type="submit"]:hover {
      background: #18513a;
    }

    /* Loading Overlay */
    .loading-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(44, 62, 80, 0.25);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }
    .loading-box {
      background: #fff;
      padding: 28px 38px;
      border-radius: 14px;
      box-shadow: 0 4px 16px rgba(44, 62, 80, 0.25);
      font-size: 1.1rem;
      color: #2d6a4f;
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .spinner {
      width: 32px;
      height: 32px;
      border: 4px solid #69b578;
      border-top: 4px solid #2d6a4f;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    @keyframes spin {
      to { transform: rotate(360deg);}
    }

    /* Success Popup */
    .popup-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(44, 62, 80, 0.25);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }
    .popup-box {
      background: #fff;
      padding: 38px 46px;
      border-radius: 14px;
      box-shadow: 0 4px 16px rgba(44, 62, 80, 0.25);
      font-size: 1.15rem;
      color: #2d6a4f;
      text-align: center;
      position: relative;
    }
    .popup-box button {
      background: #2d6a4f;
      color: #fff;
      border: none;
      border-radius: 7px;
      padding: 10px 20px;
      font-size: 1rem;
      margin-top: 18px;
      cursor: pointer;
      transition: background 0.2s;
      box-shadow: 0 2px 8px rgba(44, 62, 80, 0.16);
    }
    .popup-box button:hover {
      background: #18513a;
    }
    @media (max-width: 600px) {
      .card {
        padding: 18px 8px 18px 8px;
        max-width: 98%;
        margin: 16px auto 20px auto;
      }
      .header img {
        max-width: 75px;
      }
      .header h2 {
        font-size: 1.12rem;
      }
      .popup-box, .loading-box {
        padding: 20px 10px;
        font-size: 0.97rem;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <img src="rsud1.png" alt="Logo RSUD Tanjung Pura">
    <h2>Kuisioner Survei Kepuasan Masyarakat (SKM)</h2>
  </div>
  <div class="card">
    <form id="skmForm">
      <fieldset>
        <legend>Profil Responden</legend>
        <label>Unit Layanan:
          <select name="unit" required>
            <option value="">-- Pilih --</option>
            <option value="Rawat Jalan">Rawat Jalan</option>
            <option value="Rawat Inap">Rawat Inap</option>
            <option value="IGD">IGD</option>
          </select>
        </label>
        <label>Jenis Kelamin:
          <select name="jenis_kelamin" required>
            <option value="">-- Pilih --</option>
            <option value="Laki-laki">Laki-laki</option>
            <option value="Perempuan">Perempuan</option>
          </select>
        </label>
        <label>Usia:
          <input type="number" name="usia" min="1" max="120" required> Tahun
        </label>
        <label>Pendidikan:
          <input type="text" name="pendidikan" required>
        </label>
        <label>Pekerjaan:
          <input type="text" name="pekerjaan" required>
        </label>
        <label>Jenis Layanan yang diterima:
          <input type="text" name="jenis_layanan" required>
        </label>
      </fieldset>

      <fieldset>
        <legend>Pendapat Responden</legend>
        <label>1. Kesesuaian persyaratan pelayanan</label>
        <div class="options">
          <label><input type="radio" name="q1" value="1" required> a. Tidak sesuai</label>
          <label><input type="radio" name="q1" value="2"> b. Kurang sesuai</label>
          <label><input type="radio" name="q1" value="3"> c. Sesuai</label>
          <label><input type="radio" name="q1" value="4"> d. Sangat sesuai</label>
        </div>
        <label>2. Kemudahan prosedur pelayanan</label>
        <div class="options">
          <label><input type="radio" name="q2" value="1" required> a. Tidak mudah</label>
          <label><input type="radio" name="q2" value="2"> b. Kurang mudah</label>
          <label><input type="radio" name="q2" value="3"> c. Mudah</label>
          <label><input type="radio" name="q2" value="4"> d. Sangat mudah</label>
        </div>
        <label>3. Kecepatan pelayanan</label>
        <div class="options">
          <label><input type="radio" name="q3" value="1" required> a. Tidak cepat</label>
          <label><input type="radio" name="q3" value="2"> b. Kurang cepat</label>
          <label><input type="radio" name="q3" value="3"> c. Cepat</label>
          <label><input type="radio" name="q3" value="4"> d. Sangat cepat</label>
        </div>
        <label>4. Kewajaran biaya/tarif pelayanan</label>
        <div class="options">
          <label><input type="radio" name="q4" value="1" required> a. Sangat mahal</label>
          <label><input type="radio" name="q4" value="2"> b. Cukup mahal</label>
          <label><input type="radio" name="q4" value="3"> c. Murah</label>
          <label><input type="radio" name="q4" value="4"> d. Gratis</label>
        </div>
        <label>5. Kesesuaian produk pelayanan</label>
        <div class="options">
          <label><input type="radio" name="q5" value="1" required> a. Tidak sesuai</label>
          <label><input type="radio" name="q5" value="2"> b. Kurang sesuai</label>
          <label><input type="radio" name="q5" value="3"> c. Sesuai</label>
          <label><input type="radio" name="q5" value="4"> d. Sangat sesuai</label>
        </div>
        <label>6. Kompetensi petugas</label>
        <div class="options">
          <label><input type="radio" name="q6" value="1" required> a. Tidak kompeten</label>
          <label><input type="radio" name="q6" value="2"> b. Kurang kompeten</label>
          <label><input type="radio" name="q6" value="3"> c. Kompeten</label>
          <label><input type="radio" name="q6" value="4"> d. Sangat kompeten</label>
        </div>
        <label>7. Perilaku petugas (sopan & ramah)</label>
        <div class="options">
          <label><input type="radio" name="q7" value="1" required> a. Tidak sopan dan ramah</label>
          <label><input type="radio" name="q7" value="2"> b. Kurang sopan dan ramah</label>
          <label><input type="radio" name="q7" value="3"> c. Sopan dan ramah</label>
          <label><input type="radio" name="q7" value="4"> d. Sangat sopan dan ramah</label>
        </div>
        <label>8. Sarana dan prasarana</label>
        <div class="options">
          <label><input type="radio" name="q8" value="1" required> a. Buruk</label>
          <label><input type="radio" name="q8" value="2"> b. Cukup</label>
          <label><input type="radio" name="q8" value="3"> c. Baik</label>
          <label><input type="radio" name="q8" value="4"> d. Sangat baik</label>
        </div>
        <label>9. Penanganan pengaduan</label>
        <div class="options">
          <label><input type="radio" name="q9" value="1" required> a. Tidak ada</label>
          <label><input type="radio" name="q9" value="2"> b. Ada tapi tidak berfungsi</label>
          <label><input type="radio" name="q9" value="3"> c. Berfungsi kurang maksimal</label>
          <label><input type="radio" name="q9" value="4"> d. Dikelola dengan baik</label>
        </div>
      </fieldset>
      <button type="submit">Kirim Kuisioner</button>
    </form>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-box">
      <span class="spinner"></span>
      <span>Mengirim data...</span>
    </div>
  </div>

  <!-- Success Popup -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup-box">
      <div style="font-size:1.7rem; color:#69b578; margin-bottom:10px;">&#10003;</div>
      Data berhasil dikirim!
      <br>
      <button onclick="closePopup()">Tutup</button>
    </div>
  </div>

  <script>
    // Ganti URL di bawah ini dengan URL Google Apps Script Web App Anda!
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzdCXN4jonjBiRyqCQQW8ap7rUrZVQNsfiaI-EUYp763YwaQ-sTqK6i_EdQjK0uI7-G/exec';

    const form = document.getElementById("skmForm");
    const loadingOverlay = document.getElementById("loadingOverlay");
    const popupOverlay = document.getElementById("popupOverlay");

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      showLoading();
      const formData = new FormData(form);
      fetch(scriptURL, { method: 'POST', body: formData })
        .then(response => {
          hideLoading();
          if (response.ok) {
            form.reset();
            showPopup();
          } else {
            alert("Gagal mengirim. Silakan coba lagi.");
          }
        })
        .catch(error => {
          hideLoading();
          alert("Ada masalah koneksi. Silakan coba lagi.");
        });
    });

    function showLoading() {
      loadingOverlay.style.display = "flex";
    }
    function hideLoading() {
      loadingOverlay.style.display = "none";
    }
    function showPopup() {
      popupOverlay.style.display = "flex";
    }
    function closePopup() {
      popupOverlay.style.display = "none";
    }
  </script>
</body>
</html>